<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'"
    />
    <title>Job Applicator</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="toolbar">
      <input type="text" class="url-input" id="urlInput" placeholder="Enter job application URL..." />
      <button class="btn-go" id="goBtn">Go</button>
      <button class="btn-submit" id="submitJobBtn">Submit Job</button>
      <span class="status" id="status">Ready</span>
    </div>

    <div class="sidebar" id="sidebar">
      <div class="sidebar-content">
        <!-- Workflow Progress Section -->
        <section class="sidebar-section workflow-section">
          <div class="workflow-progress" id="workflowProgress" role="group" aria-label="Application workflow progress">
            <div class="workflow-step" data-step="job">
              <span class="step-indicator" aria-hidden="true"></span>
              <span class="step-label">Job</span>
              <span class="sr-only" id="job-status">pending</span>
            </div>
            <div class="workflow-connector" aria-hidden="true"></div>
            <div class="workflow-step" data-step="docs">
              <span class="step-indicator" aria-hidden="true"></span>
              <span class="step-label">Docs</span>
              <span class="sr-only" id="docs-status">pending</span>
            </div>
            <div class="workflow-connector" aria-hidden="true"></div>
            <div class="workflow-step" data-step="fill">
              <span class="step-indicator" aria-hidden="true"></span>
              <span class="step-label">Fill</span>
              <span class="sr-only" id="fill-status">pending</span>
            </div>
            <div class="workflow-connector" aria-hidden="true"></div>
            <div class="workflow-step" data-step="submit">
              <span class="step-indicator" aria-hidden="true"></span>
              <span class="step-label">Submit</span>
              <span class="sr-only" id="submit-status">pending</span>
            </div>
          </div>
        </section>

        <!-- Job Matches Section -->
        <section class="sidebar-section">
          <h3 class="section-title">Job Matches</h3>
          <div class="job-list" id="jobList">
            <div class="loading-placeholder">Loading...</div>
          </div>
        </section>

        <!-- Job Actions Section (shown when job selected) -->
        <section class="sidebar-section job-actions-section hidden" id="jobActionsSection">
          <h3 class="section-title">Actions</h3>
          <div class="job-actions">
            <button class="btn-mark-applied" id="markAppliedBtn">Mark as Applied</button>
            <button class="btn-mark-ignored" id="markIgnoredBtn">Ignore</button>
          </div>
        </section>

        <!-- Documents Section -->
        <section class="sidebar-section" id="documentsSection">
          <h3 class="section-title">Documents</h3>
          <div class="documents-list" id="documentsList">
            <div class="empty-placeholder">Select a job match</div>
          </div>
          <div class="section-actions generate-actions">
            <select id="generateType" class="generate-type-select">
              <option value="both">Resume + Cover Letter</option>
              <option value="resume">Resume Only</option>
              <option value="coverLetter">Cover Letter Only</option>
            </select>
            <button class="btn-generate" id="generateBtn" disabled>Generate</button>
          </div>
          <!-- Generation Progress -->
          <div class="generation-progress hidden" id="generationProgress">
            <div class="generation-steps" id="generationSteps"></div>
          </div>
          <!-- Upload Actions (enabled when file input detected and document selected) -->
          <div class="upload-actions" id="uploadActions">
            <div class="upload-status" id="uploadStatus">
              <span class="upload-status-icon">âš </span>
              <span class="upload-status-text" id="uploadStatusText">No file input detected</span>
              <button class="btn-rescan" id="rescanBtn" title="Re-scan page for file inputs">Rescan</button>
            </div>
            <div class="upload-buttons">
              <button class="btn-upload-resume" id="uploadResumeBtn" disabled title="Select a document and navigate to a page with file upload">
                Upload Resume
              </button>
              <button class="btn-upload-cover" id="uploadCoverBtn" disabled title="Select a document and navigate to a page with file upload">
                Upload Cover Letter
              </button>
            </div>
          </div>
        </section>

        <!-- Form Fill Section -->
        <section class="sidebar-section" id="fillSection">
          <h3 class="section-title">Form Fill</h3>
          <div class="fill-controls">
            <select id="providerSelect" class="provider-select">
              <option value="claude">Claude</option>
              <option value="codex">Codex</option>
              <option value="gemini">Gemini</option>
            </select>
            <button class="btn-fill" id="fillBtn">Fill Form</button>
          </div>
          <div class="fill-output" id="fillOutput">
            <div class="empty-placeholder">Ready to fill form</div>
          </div>
        </section>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
